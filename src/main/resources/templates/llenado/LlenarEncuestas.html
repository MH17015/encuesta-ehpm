<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">

<head>  
  <title>Encuestador</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Hojas de estilo generales -->
  <div th:replace="base/general :: hojas_de_estilo"></div>
</head>

<body>
  <!-- Barra_de_navegación -->
  <div th:replace="base/general :: navbar(~{ :: .elementos})">
    <ul class="navbar-nav mr-auto elementos">
      <!-- <li class="nav-item">
        <a class="nav-link" href="index.html">Inicio</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="tabla.html">Tabla</a>
      </li>
      <li class="nav-item active">
        <a class="nav-link" href="formulario.html">Formulario</a>
      </li> -->
    </ul>
  </div>

	<!-- Contenido_de_la_página -->
  <div class="container">

   <!-- Ruta del contendio -->
     <ol class="breadcrumb">
        <li class="breadcrumb-item">
           <a th:href="@{/}">Inicio</a>
        </li>
		  
        	<li class="breadcrumb-item active">
		    	<a >Llenado</a>
		    </li>
     </ol>

    <!-- Título de la pantalla -->
    <div th:replace="base/general :: titulo_pantalla(
      titulo=~{ :: .titulo}, btnPrincipal=~{ :: .btnPrincipal}, subTit=~{ :: .subTit}
    )">
      <h2 class="titulo">Información de Llenado</h2>
	<button class="btn btn-dark btn-sm btnPrincipal btn-modal" type="button" data-toggle="modal" data-target="#muestra" data-whatever="@mdo"><i class="	fas fa-plus"></i>	Iniciar Encuesta</button>     
      <h5 class="subTit"></h5>      
		</div>
	

		<div class="row mb-4">
      <div class="col-md-12">
				<div class="card">
					<div class="card-header">
						<h5>Encuestas pendientes</h5>
					</div>

					<div class="card-body">
						<table class="table text-center table-striped ">
							<thead>
								<tr>
									<th scope="col">Identificación</th>
									<th scope="col">Encuesta</th>
									<th scope="col">Domicilio</th>
									<th scope="col">Acciones</th>
								</tr>
							</thead>

							<tbody>
								<tr th:each="llenado : ${llenados}" >
									<td th:text="${llenado.muestral}"></td>
									<td th:text="${llenado.encuesta.nombre}"></td>
									<td th:text="${llenado.domicilio}"></td>
									<td>
										<a class="btn btn-outline-dark" id="btnEliminar" 
                                        th:attr="onclick=|eliminarLlenado('${llenado.id}' )|" 
                                        data-toggle="tooltip" data-placement="bottom" 
                                        title="Cancelar llenado"> <i class="fas fa-times-circle"></i></a>
										
											<a
											th:href="@{/llenado/secciones/{id} (id=${llenado.encuesta.id})}"
											class="btn btn-outline-dark"
											data-toggle="tooltip"
											data-placement="bottom"
											title="Iniciar llenado"
										><i class="fas fa-arrow-circle-right" aria-hidden="true"></i></a>	
									</td>
								</tr>
							</tbody>
						</table>		
					</div>
				</div>
      		</div>
		</div>
	</div>

<!--Modal para crear información de encuesta-->
	<div class="modal fade" id="muestra" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-scrollable" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Información de llenado</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form th:action="@{/llenado/save}" th:object="${llenado}" method="post">                        					
						<!--Identificacion-->
						<div class="form-group">
							<label for="muestral">Identificacion muestral: <span class="text-danger">*</span> </label>
							<input type="hidden" th:field="*{id}" >	
							<input type="text" class="form-control" id="muestral" name="muestral" th:field="*{muestral}" >
						</div>
						<!--Domicilio-->    
						<div class="form-group">
							<label for="domicilio">Domicilio: <span class="text-danger">*</span> </label>
							<input type="text" class="form-control" id="domicilio" name="domicilio"th:field="*{domicilio}" >
						</div>
						<!--Encuesta-->    
						<div class="form-group">
							<label for="Encuesta">Encuesta</label>
							<select class="form-control" name="encuesta" id="encuesta" th:field="*{encuesta}">
							<option value="0" disabled selected>Seleccionar encuesta</option>
								<option
									th:each="encuesta : ${encuestas}" 
									th:value="${encuesta.id}"<
									th:text="${encuesta.nombre}">
								</option>
							</select>
						</div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-dark" data-dismiss="modal">Cancelar</button>
                    <button class="btn btn-dark" type="submit">Crear</button>
                </div>	
				</form>		
            </div>
        </div>
    </div>
			
	<!-- Scripts generales -->
	<div th:replace="base/general :: scripts"></div>
	<script th:src="@{/js/llenado/llenado.js}" type="text/javascript"></script> 
</body>
</html>
