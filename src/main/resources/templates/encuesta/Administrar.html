<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">

<head>  
  <title>Administrar Encuestas</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Hojas de estilo generales -->
  <div th:replace="base/general :: hojas_de_estilo"></div>
</head>

<body>
	<!-- Barra_de_navegación -->
  <div th:replace="base/general :: navbar(~{ :: .elementos})">
    <ul class="navbar-nav mr-auto elementos">
      <!-- <li class="nav-item">
        <a class="nav-link" href="index.html">Inicio</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="tabla.html">Tabla</a>
      </li>
      <li class="nav-item active">
        <a class="nav-link" href="formulario.html">Formulario</a>
      </li> -->
    </ul>
	</div>	

	<!-- Contenido_de_la_página -->
  <div class="container">
        <!-- Ruta del contendio -->
        <ol class="breadcrumb">
         	<li class="breadcrumb-item">
          	  <a th:href="@{/}">Inicio</a>
        	</li>
         	 <li class="breadcrumb-item active">
		  		<a >Encuesta</a>
			</li>
        </ol>

    <!-- Título de la pantalla -->
    <div th:replace="base/general :: titulo_pantalla(
      titulo=~{ :: .titulo}, btnPrincipal=~{ :: .btnPrincipal}, subTit=~{ :: .subTit}
    )">
      <h2 class="titulo">Administrar Encuesta</h2>
      <div class="btnPrincipal"></div>      
			<h5 class="subTit">Administrador</h5>     
			
      <!-- <div class="subTit"></div>  -->
      <!-- <button class="btn btn-dark btn-sm btnPrincipal"><i class="fas fa-plus"></i> Botón Principal</button> -->
		</div>
		
		<div class="row mb-4">
			<div class="col-md-12"> 	
				<div class="card">

					<div class="card-header">
						<h5>Información de Encuesta</h5>
						<small class="text-danger">* Obligatorio</small>
					</div>		 
					<div class="card-body">
					<!-- Mensajes -->
						<div class="alert alert-success alert-dismissable" th:if="${success !=null}">
							<label th:text="${success}"></label>
							<button type="button" class="close" data-dismiss="alert">&times;</button>
						</div>
						<form id="formEncuesta" th:action="@{/encuesta/save}" th:object="${encuesta}" method="post"> 	
							<div class="form-row">
								<div class="form-group col-md-6" >
									<label for="codigo">Código: <span class="text-danger">*</span></label>
									<input type="hidden" th:field="*{id}" >	
									<input type="hidden" th:field="*{fecha}" >											    
									<input type="text" class="form-control" id="codigo" name="codigo" placeholder="Código" th:field="*{codigo}">
									<small class="form-text text-danger" th:if="${#fields.hasErrors('codigo')}" th:errors="*{codigo}"></small>
								</div>
								<div class="form-group col-md-6" >
									<label for="nombre">Nombre: <span class="text-danger">*</span></label>
									<input type="hidden">											    
										<input type="text" class="form-control" id="nombre" name="nombre"  placeholder="Nombre" th:field="*{nombre}">
										<small class="form-text text-danger" th:if="${#fields.hasErrors('nombre')}" th:errors="*{nombre}"></small>
								</div>
							</div>
							<div class="form-row">
								<div class="form-group col-md-6">
									<label for="descripcion">Descripción: <span class="text-danger">*</span></label>					    
                           			 <textarea class="form-control" id="descripcion" name="descripcion" rows="1" cols="50"placeholder="Descripción" th:field="*{descripcion}"></textarea>                             
									<small class="form-text text-danger" th:if="${#fields.hasErrors('descripcion')}" th:errors="*{descripcion}"></small>
								</div>
							<div class="form-group col-md-6">
			                  <label>Estado: <span class="text-danger">*</span></label>
			                  <input type="hidden">
			                  <div class="form-group">
			                    <div class="form-check form-check-inline">
			                      <input class="form-check-input" type="radio" name="estado" id="estado" value="Habilitado" th:field="*{estado}">
			                      <label class="form-check-label" for="#">Habilitado</label>
			                    </div>
			                    <div class="form-check form-check-inline">
			                      <input class="form-check-input" type="radio" name="estado" id="estado" value="Deshabilitado" th:field="*{estado}">
			                      <label class="form-check-label" for="#">Deshabilitado</label>
			                    </div>
			                  </div>
			                </div>				 					                  			  
						</div>
						</div>								  
						<div class="card-footer">
							<div class="float-right">
								<!-- Botón de cancelar -->
								<a 
									th:href="@{/encuesta/administrar}"
									class="btn btn-outline-dark" 
									role="button"
								>Limpiar</a>

								<!-- Botón de submit -->
								<button class="btn btn-dark" type="submit">Guardar</button>
								</div>
						</div>   
					</form>   	
					</div>
					</div>   		   	
			</div>	  	
			<div class="row">
			<div class="col-md-12">
				<div class="card">
					<div class="card-header">
						<h5>Lista de encuestas</h5>
					</div>
					<div class="card-body">
						<table class="table text-center table-striped">
							<thead>
								<tr>
									<th >Código</th>
									<th >Nombre</th>
									<th >Descripción</th>
									<th >Fecha de creación</th>
									<th >Estado</th>
									<th >Acciones</th>
								</tr>
							</thead>
							<tbody>
								<tr th:each="encuesta : ${encuestas}">
									<td  th:text="${encuesta.codigo}"></td>
									<td th:text="${encuesta.nombre}"></td>
									<td th:text="${encuesta.descripcion}"></td>
									<td th:text="${encuesta.fecha}"></td>
									<td th:text="${encuesta.estado}"></td>
									<td>
										<a
										   th:href="@{/encuesta/editar/{id} (id=${encuesta.id})}"
											class="btn btn-outline-dark"
											data-toggle="tooltip"
											data-placement="bottom"
											title="Editar encuesta"
										><i class="fas fa-edit"></i></a>
										
										<a class="btn btn-outline-dark" id="btnEliminar" 
                                        th:attr="onclick=|eliminarEncuesta('${encuesta.id}' )|" 
                                        data-toggle="tooltip" data-placement="bottom" 
                                        title="Eliminar encuestas"> <i class="fas fa-trash-alt"></i></a>
										
										<span th:if="${encuesta.estado == 'Habilitado'}"> 
											<a
											th:href="@{/cuestionario/seccion/{id} (id=${encuesta.id})}"
											class="btn btn-outline-dark"
											data-toggle="tooltip"
											data-placement="bottom"
											title="Diseñar formulario"
										><i class="fas fa-arrow-circle-right" aria-hidden="true"></i></a>	
										</span>					
									</td> 			 							
								</tr>
							</tbody>	 				
						</table>
					</div>
					<div class="card-footer">
					</div>
				</div>
			</div>
			</div>
		</div>	 
	</div> 		 	
	
	<!-- Scripts generales -->
  <div th:replace="base/general :: scripts"></div>
     <script th:src="@{/js/encuesta/encuesta.js}" type="text/javascript"></script> 
</body>
</html>